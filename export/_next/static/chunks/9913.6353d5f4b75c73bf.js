!function(){"use strict";var e,r;let t;let a="https://unpkg.com/@ffmpeg/core@0.12.6/dist/umd/ffmpeg-core.js";(r=e||(e={})).LOAD="LOAD",r.EXEC="EXEC",r.WRITE_FILE="WRITE_FILE",r.READ_FILE="READ_FILE",r.DELETE_FILE="DELETE_FILE",r.RENAME="RENAME",r.CREATE_DIR="CREATE_DIR",r.LIST_DIR="LIST_DIR",r.DELETE_DIR="DELETE_DIR",r.ERROR="ERROR",r.DOWNLOAD="DOWNLOAD",r.PROGRESS="PROGRESS",r.LOG="LOG",r.MOUNT="MOUNT",r.UNMOUNT="UNMOUNT";let s=Error("unknown message type"),E=Error("ffmpeg is not loaded, call `await ffmpeg.load()` first");Error("called FFmpeg.terminate()");let l=Error("failed to import ffmpeg-core.js"),load=async({coreURL:r,wasmURL:s,workerURL:E})=>{let i=!t;try{r||(r=a),importScripts(r)}catch{if(r||(r=a.replace("/umd/","/esm/")),self.createFFmpegCore=(await import(r)).default,!self.createFFmpegCore)throw l}let o=r,c=s||r.replace(/.js$/g,".wasm"),R=E||r.replace(/.js$/g,".worker.js");return(t=await self.createFFmpegCore({mainScriptUrlOrBlob:`${o}#${btoa(JSON.stringify({wasmURL:c,workerURL:R}))}`})).setLogger(r=>self.postMessage({type:e.LOG,data:r})),t.setProgress(r=>self.postMessage({type:e.PROGRESS,data:r})),i},exec=({args:e,timeout:r=-1})=>{t.setTimeout(r),t.exec(...e);let a=t.ret;return t.reset(),a},writeFile=({path:e,data:r})=>(t.FS.writeFile(e,r),!0),readFile=({path:e,encoding:r})=>t.FS.readFile(e,{encoding:r}),deleteFile=({path:e})=>(t.FS.unlink(e),!0),rename=({oldPath:e,newPath:r})=>(t.FS.rename(e,r),!0),createDir=({path:e})=>(t.FS.mkdir(e),!0),listDir=({path:e})=>{let r=t.FS.readdir(e),a=[];for(let s of r){let r=t.FS.stat(`${e}/${s}`),E=t.FS.isDir(r.mode);a.push({name:s,isDir:E})}return a},deleteDir=({path:e})=>(t.FS.rmdir(e),!0),mount=({fsType:e,options:r,mountPoint:a})=>{let s=t.FS.filesystems[e];return!!s&&(t.FS.mount(s,r,a),!0)},unmount=({mountPoint:e})=>(t.FS.unmount(e),!0);self.onmessage=async({data:{id:r,type:a,data:l}})=>{let i;let o=[];try{if(a!==e.LOAD&&!t)throw E;switch(a){case e.LOAD:i=await load(l);break;case e.EXEC:i=exec(l);break;case e.WRITE_FILE:i=writeFile(l);break;case e.READ_FILE:i=readFile(l);break;case e.DELETE_FILE:i=deleteFile(l);break;case e.RENAME:i=rename(l);break;case e.CREATE_DIR:i=createDir(l);break;case e.LIST_DIR:i=listDir(l);break;case e.DELETE_DIR:i=deleteDir(l);break;case e.MOUNT:i=mount(l);break;case e.UNMOUNT:i=unmount(l);break;default:throw s}}catch(t){self.postMessage({id:r,type:e.ERROR,data:t.toString()});return}i instanceof Uint8Array&&o.push(i.buffer),self.postMessage({id:r,type:a,data:i},o)}}(),_N_E={};