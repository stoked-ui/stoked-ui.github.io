"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8513],{28513:function(e,t,n){n.d(t,{M:function(){return eB}});var o,i,r,a,l,s,u,c,d,p,f,v=n(36063),h=n(45711),m=n(53710),g=n(65784),x=n(92379),y=n(69974),Z=n(90996),w=n(77539),P=n(62534),k=n(25411),b=n(14721),E=n(80835),S=n(30459),R=n(5652),M=n(17942),C=n(43880),T=n(76760),j=n(43640),L=n(76236),A=n.n(L),I=n(53020),F=n.n(I),D=function(){function EventManager(){(0,C.Z)(this,EventManager),(0,j.Z)(this,"maxListeners",20),(0,j.Z)(this,"warnOnce",!1),(0,j.Z)(this,"events",{})}return(0,T.Z)(EventManager,[{key:"on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.events[e];o||(o={highPriority:new(A()),regular:new(A())},this.events[e]=o),n.isFirst?o.highPriority.set(t,!0):o.regular.set(t,!0)}},{key:"removeListener",value:function(e,t){this.events[e]&&(this.events[e].regular.delete(t),this.events[e].highPriority.delete(t))}},{key:"removeAllListeners",value:function(){this.events={}}},{key:"emit",value:function(e){var t=this.events[e];if(t){for(var n=F()(t.highPriority.keys()),o=F()(t.regular.keys()),i=arguments.length,r=Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];for(var l=n.length-1;l>=0;l-=1){var s=n[l];t.highPriority.has(s)&&s.apply(this,r)}for(var u=0;u<o.length;u+=1){var c=o[u];t.regular.has(c)&&c.apply(this,r)}}}},{key:"once",value:function(e,t){var n=this;this.on(e,function oneTimeListener(){n.removeListener(e,oneTimeListener);for(var o=arguments.length,i=Array(o),r=0;r<o;r++)i[r]=arguments[r];t.apply(n,i)})}}]),EventManager}(),useEditorInstanceEvents=function(){var e=x.useState(function(){return new D}),t=(0,m.Z)(e,1)[0];return{instance:{$$publishEvent:x.useCallback(function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];var i=n[0],r=n[1],a=n[2],l=void 0===a?{}:a;l.defaultMuiPrevented=!1,void 0!==l.isPropagationStopped&&l.isPropagationStopped()||t.emit(i,r,l)},[t]),$$subscribeEvent:x.useCallback(function(e,n){return t.on(e,n),function(){t.removeListener(e,n)}},[t])}}};useEditorInstanceEvents.params={};var V=[useEditorInstanceEvents],U=n(51041),_=n.n(U),z=["slots","slotProps","apiRef","experimentalFeatures"],extractPluginParamsFromProps=function(e){var t=e.props,n=t.slots,o=t.slotProps,i=t.apiRef,r=t.experimentalFeatures,a=(0,g.Z)(t,z),l=e.plugins,s={};l.forEach(function(e){(0,M.Z)(s,e.params)});var u={},c={};return _()(a).forEach(function(e){var t=a[e];s[e]?u[e]=t:c[e]=t}),{apiRef:i,forwardedProps:c,pluginParams:l.reduce(function(e,t){return t.getDefaultizedParams?t.getDefaultizedParams(e):e},u),slots:null!=n?n:{},slotProps:null!=o?o:{},experimentalFeatures:null!=r?r:{}}},N=n(81702),W=new(function(){function AudioControl(){(0,C.Z)(this,AudioControl),(0,j.Z)(this,"id","audio"),(0,j.Z)(this,"name","Audio"),(0,j.Z)(this,"color","#800080"),(0,j.Z)(this,"cacheMap",{}),(0,j.Z)(this,"listenerMap",{})}return(0,T.Z)(AudioControl,[{key:"enter",value:function(e){var t,n=e.action,o=e.engine,i=e.time;if(!o||!n.data)throw Error("engine is required to play audio");this.cacheMap[n.id]?((t=this.cacheMap[n.id]).rate(o.getPlayRate()),t.seek((i-n.start)%t.duration()),t.play()):(t=new N.Howl({src:n.data.src,loop:!0,autoplay:!0}),this.cacheMap[n.id]=t,t.on("load",function(){t.rate(o.getPlayRate()),t.seek((i-n.start)%t.duration())}));var timeListener=function(e){t.seek(e.time,i)},rateListener=function(e){t.rate(e.rate)};this.listenerMap[n.id]||(this.listenerMap[n.id]={}),o.on("afterSetTime",timeListener),o.on("afterSetPlayRate",rateListener),this.listenerMap[n.id].time=timeListener,this.listenerMap[n.id].rate=rateListener}},{key:"leave",value:function(e){var t=e.action,n=e.engine;this.cacheMap[t.id]&&(this.cacheMap[t.id].stop(),this.listenerMap[t.id]&&(this.listenerMap[t.id].time&&n.off("afterSetTime",this.listenerMap[t.id].time),this.listenerMap[t.id].rate&&n.off("afterSetPlayRate",this.listenerMap[t.id].rate),delete this.listenerMap[t.id]))}}]),AudioControl}()),B=n(923),K=n.n(B),H=new(function(){function AnimationControl(){(0,C.Z)(this,AnimationControl),(0,j.Z)(this,"id","animation"),(0,j.Z)(this,"name","Animation"),(0,j.Z)(this,"color","#4169E1"),(0,j.Z)(this,"cacheMap",{})}return(0,T.Z)(AnimationControl,[{key:"_goToAndStop",value:function(e,t){if(e.getDuration()){var n=1e3*e.getDuration();(t*=1e3)>n&&(t%=n),e.goToAndStop(t)}}},{key:"enter",value:function(e){var t,n=this,o=e.action,i=e.engine,r=e.time;i.isPlaying&&o.data&&(this.cacheMap[o.id]?((t=this.cacheMap[o.id]).show(),this._goToAndStop(t,r)):((t=K().loadAnimation({name:o.id,container:i.viewer,renderer:"svg",loop:!0,autoplay:!1,path:o.data.src,rendererSettings:{className:"MuiEditorView-content animation"}})).addEventListener("loaded_images",function(){n._goToAndStop(t,r-o.start)}),this.cacheMap[o.id]=t))}},{key:"update",value:function(e){var t=e.action,n=e.time,o=this.cacheMap[t.id];o&&this._goToAndStop(o,n-t.start)}},{key:"leave",value:function(e){var t=e.action,n=e.time,o=this.cacheMap[t.id];if(o){if(n>t.end||n<t.start)o.hide();else{var i=n-t.start;o.show(),this._goToAndStop(o,i)}}}},{key:"start",value:function(e){this.enter(e)}},{key:"stop",value:function(e){this.leave(e)}},{key:"destroy",value:function(){K().destroy(),this.cacheMap={}}}]),AnimationControl}()),$=n(21797),G=n.n($),O={audio:W,animation:H,video:new(function(){function VideoControl(){(0,C.Z)(this,VideoControl),(0,j.Z)(this,"id","video"),(0,j.Z)(this,"name","Video"),(0,j.Z)(this,"color","#0000FF"),(0,j.Z)(this,"cacheMap",{}),(0,j.Z)(this,"_videoItem",null)}return(0,T.Z)(VideoControl,[{key:"_goToAndStop",value:function(e,t){var n=1e3*e.duration;(t*=1e3)>n&&(t%=n),e.currentTime=t/1e3,e.pause()}},{key:"enter",value:function(e){var t,n,o=this,i=e.action,r=e.time,a=e.engine;if(i.data){var l=a.getActionTrack(i.id);if(this.cacheMap[i.id])t=this.cacheMap[i.id],l.hidden?t.style.display="none":(t.style.display="flex",this._goToAndStop(t,r));else if(!l.hidden){if((t=document.createElement("video")).src=i.data.src,t.style.position="absolute",t.style.display="flex",null!==(n=i.data)&&void 0!==n&&n.style)for(var s in i.data.style)t.style[s]=i.data.style[s];t.loop=!0,t.muted=!0,t.addEventListener("loadedmetadata",function(){o._goToAndStop(t,r-i.start)}),this.cacheMap[i.id]=t,a.viewer?a.viewer.appendChild(t):console.warn("no viewer specified when video control loaded meta data",t.src)}}}},{key:"viewerUpdate",value:function(e){}},{key:"update",value:function(e){var t=e.action,n=e.engine,o=e.time,i=this.cacheMap[t.id];i&&(n.getActionTrack(t.id).hidden?i.style.display="none":this._goToAndStop(i,o-t.start))}},{key:"leave",value:function(e){var t=e.action,n=e.time,o=this.cacheMap[t.id];if(o){if(n>t.end||n<t.start)o.style.display="none";else{var i=n-t.start;o.style.display="block",this._goToAndStop(o,i)}}}},{key:"destroy",value:function(){G()(this.cacheMap).forEach(function(e){e.remove()}),this.cacheMap={}}}]),VideoControl}())},useEditor=function(e){var t,n=e.plugins,o=e.rootRef,i=e.props,r=[].concat((0,h.Z)(V),(0,h.Z)(n)),a=extractPluginParamsFromProps({plugins:r,props:i}),l=a.pluginParams,s=a.forwardedProps,u=a.apiRef,c=a.experimentalFeatures,d=a.slots,p=a.slotProps;console.log("plugins",r,"pluginParams",l);var f=(x.useRef({}),console.log("model props",l),{}),g=x.useRef({}).current,Z=(t=x.useRef({}),u?(null==u.current&&(u.current={}),u.current):t.current),w=x.useRef(null),P=(0,y.Z)(w,o),k=x.useState(function(){try{var e={};return r.forEach(function(t){t.getInitialState&&(0,M.Z)(e,t.getInitialState(l))}),e}catch(e){throw console.log("ex",e),e}}),b=(0,m.Z)(k,2),E=b[0],S=b[1],R={publicAPI:Z,runItemPlugins:function(e){var t=null,n=null;return r.forEach(function(o){if(o.itemPlugin){var i=o.itemPlugin({props:e,rootRef:t,contentRef:n});i.rootRef&&(t=i.rootRef),null!=i&&i.contentRef&&(n=i.contentRef)}}),{contentRef:n,rootRef:t}},instance:g,rootRef:w},C=[];return r.forEach(function(e){var t=e({instance:g,params:l,slots:d,slotProps:p,experimentalFeatures:c,state:E,setState:S,rootRef:w,models:f,plugins:r});t.getRootProps&&C.push(t.getRootProps),t.publicAPI&&(0,M.Z)(Z,t.publicAPI),t.instance&&(0,M.Z)(g,t.instance),t.contextValue&&(0,M.Z)(R,t.contextValue)}),{getRootProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,v.Z)((0,v.Z)((0,v.Z)({role:"editor"},s),e),{},{ref:P});return C.forEach(function(n){(0,M.Z)(t,n(e))}),t},getEditorViewProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,v.Z)((0,v.Z)({},s),e)},getControlsProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,v.Z)((0,v.Z)({},s),e)},getTimelineProps:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,v.Z)((0,v.Z)((0,v.Z)({},s),t),{},{tracks:null!==(e=R.tracks)&&void 0!==e?e:[],actionTypes:O})},getBottomLeftProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,v.Z)((0,v.Z)({},s),e)},getBottomRightProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,v.Z)((0,v.Z)({},s),e)},rootRef:P,contextValue:R,instance:g}};function buildTracks(e){var t=e.actions,n=e.tracks,o=e.actionData;return o?o.map(function(e){var t,n,o,i=x.useId(),r=(0,v.Z)((0,v.Z)({},e),{},{name:null!==(t=e.name)&&void 0!==t?t:i,data:e.data,id:null!==(n=e.id)&&void 0!==n?n:i}),a=x.useId();return{id:a,name:null!==(o=r.name)&&void 0!==o?o:a,actions:[r],hidden:!1,lock:!1}}):t?t.map(function(e){var n,o=x.useId();return{id:o,name:null!==(n=e.name)&&void 0!==n?n:o,actions:t,hidden:!1,lock:!1}}):n||[]}var useEditorMetadata=function(e){var t=e.params,n=e.instance;return t.tracks.forEach(function(e){e.actions.forEach(function(e){e.onKeyDown=function(t,o){console.log("on key down",e),n.handleItemKeyDown(t,"action",e)}})}),{contextValue:{tracks:t.tracks,actions:t.actions,actionData:t.actionData}}};useEditorMetadata.getDefaultizedParams=function(e){var t,n;return(0,v.Z)((0,v.Z)({},e),{},{actionData:null!==(t=e.actionData)&&void 0!==t?t:[],actions:null!==(n=e.actions)&&void 0!==n?n:[],tracks:buildTracks(e)})},useEditorMetadata.params={tracks:!0,actions:!0,actionData:!0};var X=n(75463),q=n(97118),useEditorKeyboard=function(){var e=(0,X.V)(),t=x.useRef({}),n=(0,q.Z)(function(e){t.current=e(t.current)}),handleAction=function(e,t){};return{instance:{updateFirstCharMap:n,handleItemKeyDown:function(t,n,o){if(t.preventDefault(),"action"===n){handleAction(t,o);return}console.log("key down not handled");var i,r=t.ctrlKey||t.metaKey,a=t.key;switch(!0){case" "===a:break;case"Backspace"===a:console.log("target",t.currentTarget);break;case"ArrowDown"===a:case"ArrowUp"===a:case"ArrowRight"===a&&!e||"ArrowLeft"===a&&e:case"ArrowLeft"===a&&!e||"ArrowRight"===a&&e:break;case"Home"===a:case"End"===a:t.preventDefault();break;case"*"===a:break;case"a"===a&&r:t.preventDefault();case!r&&!t.shiftKey&&!!(i=a)&&1===i.length&&!!i.match(/\S/):}}}}};useEditorKeyboard.params={};var J=[useEditorMetadata,useEditorKeyboard],Q=n(53882),Y=n.n(Q),ee=n(62924),et=n(30248),en=n(99919),eo=n(43175),ei=n(87438),er=n(85298),ea=n(71031),el=n(37900),es=n(58941),eu=n(48131),ec=n(85470),ed=n(651),ep=["scale","scaleWidth","startLeft"],ef=[.2,.5,1,1.5,2],ev=S.Z,eh=(0,R.ZP)(eu.Z)(function(e){var t=e.theme;return{background:t.palette.background.default,"& .MuiButtonBase-root":{color:t.palette.text.primary,"&:hover":{color:t.palette.primary.main,background:t.palette.background.default,border:"1px solid ".concat(t.palette.text.primary)}}}}),em=(0,R.ZP)("div")(function(e){var t=e.theme;return{height:"42px",width:"100%",display:"flex",flexDirection:"row",alignItems:"center",backgroundColor:(0,ec._4)(t.palette.background.default,.2)}}),eg=(0,R.ZP)(el.Z)(function(e){return{fontSize:"1px",fontFamily:"'Roboto Condensed', sans-serif",margin:"0 2px",py:"4px",width:"120px",alignSelf:"center","& .MuiInputBase-input":{fontSize:16,height:40,padding:"0 4px",background:e.theme.palette.background.default,borderRadius:"12px",textAlign:"end"},minWidth:"120px"}}),ex=(0,R.ZP)(ee.Z)({justifySelf:"flex-end",alignContent:"center",marginRight:"2px",backgroundColor:"transparent"}),ey=(0,R.ZP)(er.Z)(function(e){return{height:40,background:e.theme.palette.background.default,"& .MuiSelect-select":{fontFamily:"'Roboto Condensed', sans-serif",py:"4px",fontSize:16}}}),eZ=x.forwardRef(function(e,t){var n,s,u,c,d,p=e.scale,f=void 0===p?1:p,v=e.scaleWidth,h=void 0===v?160:v,y=e.startLeft,Z=void 0===y?20:y,w=(0,g.Z)(e,ep);ev({props:w,name:"MuiEditorControls"});var P=w.timelineState,k=w.editorData,b=w.autoScrollWhenPlay,E=x.useState(!1),S=(0,m.Z)(E,2),R=S[0],M=S[1],C=x.useState(0),T=(0,m.Z)(C,2),j=T[0],L=T[1],A=x.useState(!1),I=(0,m.Z)(A,2),F=I[0],D=I[1];x.useEffect(function(){P.current&&D(!0)},[P.current]),x.useEffect(function(){if(P&&P.current){var e,t,n,o,i=P.current;return null===(e=i.listener)||void 0===e||e.on("play",function(){return M(!0)}),null===(t=i.listener)||void 0===t||t.on("paused",function(){return M(!1)}),null===(n=i.listener)||void 0===n||n.on("afterSetTime",function(e){return L(e.time)}),null===(o=i.listener)||void 0===o||o.on("setTimeByTick",function(e){if(L(e.time),b){var t,n=e.time*(h/f)+Z-500;null===(t=P.current)||void 0===t||t.setScrollLeft(n)}}),function(){i&&(i.pause(),i.listener.offAll())}}},[]);var V=x.useState([]),U=(0,m.Z)(V,2),_=U[0];return U[1],(0,ed.jsxs)(em,{className:"timeline-player",children:[(0,ed.jsx)("div",{style:{display:"flex",flexDirection:"row",alignContent:"center",width:"100%"},children:(0,ed.jsxs)(eh,{value:_,exclusive:!0,onChange:function(e,t){},size:"small","aria-label":"text alignment",children:[(0,ed.jsx)(es.Z,{onClick:function(){var e;null==P||null===(e=P.current)||void 0===e||e.setTime(0)},value:"previous","aria-label":"hidden",children:o||(o=(0,ed.jsx)(ei.Z,{fontSize:"small"}))}),(0,ed.jsx)(es.Z,{value:"playPause",onClick:function(){console.log("play",null==P?void 0:P.current),P&&P.current&&(P.current.isPlaying?P.current.pause():P.current.play({autoEnd:!0}))},children:R?i||(i=(0,ed.jsx)(et.Z,{})):r||(r=(0,ed.jsx)(en.Z,{}))}),(0,ed.jsx)(es.Z,{onClick:function(){if(k){var e,t=0;k.forEach(function(e){e.actions.forEach(function(e){e.end>t&&(t=e.end)})}),console.log("end",t),null==P||null===(e=P.current)||void 0===e||e.setTime(t)}},value:"next","aria-label":"lock",children:a||(a=(0,ed.jsx)(eo.Z,{}))})]})}),(0,ed.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,ed.jsx)(eg,{variant:"outlined",size:"small",helperText:!1,value:(n="".concat(Y()("".concat(j%1*100),10)).padStart(2,"0"),s="".concat(Y()("".concat(j/60),10)).padStart(2,"0"),u="".concat(Y()("".concat(j%60),10)).padStart(2,"0"),"".concat(s,":").concat(u,".").concat(n.replace("0.","")))}),F&&(0,ed.jsx)(ex,{sx:{minWidth:"80px"},className:"rate-control",children:(0,ed.jsxs)(ey,{value:null!==(c=null===(d=P.current)||void 0===d?void 0:d.getPlayRate())&&void 0!==c?c:1,onChange:function(e){P&&P.current&&P.current.setPlayRate(e.target.value)},displayEmpty:!0,inputProps:{"aria-label":"Play Rate"},defaultValue:1,children:[l||(l=(0,ed.jsx)(ea.Z,{value:-1,children:(0,ed.jsx)("em",{children:"Rate"})},-1)),ef.map(function(e,t){return(0,ed.jsx)(ea.Z,{value:e,children:"".concat(e.toFixed(1),"x")},t)})]})})]})]})}),ew=n(48809),eP=n(62234);function getEditorViewUtilityClass(e){return(0,ew.ZP)("MuiEditorView",e)}(0,eP.Z)("MuiEditorView",["root","renderer","preview"]);var ek=S.Z,EditorView_useUtilityClasses=function(e){var t=e.classes;return(0,P.Z)({root:["root"]},getEditorViewUtilityClass,t)},eb=(0,R.ZP)("div",{name:"MuiEditorView",slot:"root"})(function(e){return e.theme,{display:"flex",flexDirection:"column",width:"100%",position:"relative",overflow:"hidden",aspectRatio:16/9}}),eE=(0,R.ZP)("canvas",{name:"MuiEditorViewRenderer",slot:"renderer"})(function(e){return e.theme,{display:"flex",flexDirection:"column",width:"100%",position:"relative",overflow:"hidden"}}),eS=(0,R.ZP)("div",{name:"MuiEditorViewPreview",slot:"preview"})(function(e){return e.theme,{display:"flex",flexDirection:"column",width:"100%",position:"relative",overflow:"hidden"}}),eR=x.forwardRef(function(e,t){var n,o=ek({props:e,name:"MuiEditorView"}),i=x.useRef(null),r=(0,y.Z)(t,i);x.useEffect(function(){e.engine.current&&null!=i&&i.current&&(e.engine.current.viewer=i.current)},[i,e.engine]);var a=o.slots,l=o.slotProps,c=EditorView_useUtilityClasses(o),d=null!==(n=null==a?void 0:a.root)&&void 0!==n?n:eb,p=(0,w.y)({elementType:d,externalSlotProps:null==l?void 0:l.root,className:c.root,ownerState:(0,v.Z)((0,v.Z)({},o),{},{ref:i})});return(0,ed.jsxs)(d,(0,v.Z)((0,v.Z)({},p),{},{ref:r,children:[s||(s=(0,ed.jsx)(eS,{})),u||(u=(0,ed.jsx)(eE,{}))]}))}),eM=n(71659),eC=n(50780),eT=n(8788),ej=n(15390),eL=n(6520);function getEditorLabelsUtilityClass(e){return(0,ew.ZP)("MuiEditorLabels",e)}(0,eP.Z)("MuiEditorLabels",["root","label"]);var EditorLabels_useUtilityClasses=function(e){var t=e.classes;return(0,P.Z)({root:["root"],label:["label"]},getEditorLabelsUtilityClass,t)},eA=(0,R.ZP)("div",{name:"MuiEditorLabels",slot:"root",overridesResolver:function(e,t){return t.icon}})(function(e){return e.theme,{display:"flex",flexDirection:"column",marginTop:"42px",height:"258px",flex:"0 1 auto",overflow:"overlay"}}),eI=(0,R.ZP)("div",{name:"MuiEditorLabel",slot:"Label",overridesResolver:function(e,t){return t.icon}})(function(e){return e.theme,{height:"32px",paddingLeft:"6px",display:"flex",alignItems:"center",justifyContent:"space-between",borderRadius:"4px"}}),eF=(0,R.ZP)(eu.Z)(function(e){var t=e.theme;return{background:t.palette.background.default,"& .MuiButtonBase-root":{color:t.palette.text.primary,"&:hover":{color:t.palette.primary.main,background:t.palette.background.default,border:"1px solid ".concat(t.palette.text.primary)}},width:"min-content",display:"flex",alignItems:"center",paddingRight:"0px","& button":{padding:"3px"}}}),eD=(0,R.ZP)("div",{name:"MuiEditorLabelContainer",slot:"Label",overridesResolver:function(e,t){return t.icon}})(function(e){var t=e.theme;return{backgroundColor:(0,ec._4)(t.palette.background.default,.12),color:t.palette.text.primary,borderRadius:"12px",width:"250px",display:"flex",alignItems:"center",paddingLeft:"6px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",textWrap:"nowrap",flexGrow:"1"}}),eV=(0,R.ZP)("div",{name:"MuiEditorLabelText",slot:"Label",overridesResolver:function(e,t){return t.icon}})(function(e){var t=e.theme;return{backgroundColor:(0,ec._4)(t.palette.background.default,.12),color:t.palette.text.primary,height:"28px",display:"flex",alignItems:"center",paddingLeft:"6px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",textWrap:"nowrap",flexGrow:"1"}}),eU=x.forwardRef(function(e,t){var n=e.track,o=(e.tracks,e.classes),i=n.hidden?c||(c=(0,ed.jsx)(eT.Z,{fontSize:"small"})):d||(d=(0,ed.jsx)(eC.Z,{fontSize:"small"})),r=n.lock?p||(p=(0,ed.jsx)(eL.Z,{fontSize:"small"})):f||(f=(0,ed.jsx)(ej.Z,{fontSize:"small"}));return(0,ed.jsx)(eI,{className:o.label,children:(0,ed.jsxs)(eD,{children:[(0,ed.jsx)(eV,{children:n.name}),(0,ed.jsxs)(eF,{exclusive:!0,"aria-label":"text alignment",children:[(0,ed.jsx)(es.Z,{value:n.hidden,onChange:function(t,o){n.hidden=o,e.setTracks(function(e){var t=(0,h.Z)(e),o=t.findIndex(function(e){return e.id===n.id});return -1!==o&&(t[o]=(0,v.Z)({},n)),t})},"aria-label":"hidden",children:i}),(0,ed.jsx)(es.Z,{value:"lock","aria-label":"lock",children:r})]})]})},n.id)}),e_=x.forwardRef(function(e,t){var n,o=(0,S.Z)({props:e,name:"MuiEditorLabels"}),i=o.tracks,r=o.slots,a=o.slotProps,l=(o.sx,o.timelineState),s=EditorLabels_useUtilityClasses(e),u=null!==(n=null==r?void 0:r.root)&&void 0!==n?n:eA;return(0,w.y)({elementType:u,externalSlotProps:null==a?void 0:a.root,className:s.root,ownerState:e}),console.log("tracks",i),(0,ed.jsx)(u,{ref:t,style:{overflow:"overlay"},onScroll:function(e){var t;null===(t=l.current)||void 0===t||t.setScrollTop(e.target.scrollTop)},classes:s,className:"".concat(s.root," timeline-list"),children:null==i?void 0:i.map(function(t){return(0,ed.jsx)(eU,{track:t,tracks:i,classes:s,onToggle:function(t,n){e.setTracks(function(e){var o=(0,h.Z)(e),i=o.findIndex(function(e){return e.id===t.id});if(-1!==i){var r=(0,v.Z)({},o[i]);r[n]=!r[n],o[i]=r}return o})},setTracks:e.setTracks},t.id)})})}),ez=["sx"],eN=S.Z,Editor_useUtilityClasses=function(e){var t=e.classes;return(0,P.Z)({root:["root"],editorView:["editorView"],videoControls:["videoControls"],timeline:["timeline"],bottomLeft:["bottomLeft"],bottomRight:["bottomRight"]},eM.I,t)},eW=(0,R.ZP)("div",{name:"MuiEditor",slot:"root"})(function(){return{display:"flex",flexDirection:"column",width:"100%","& .player-panel":{width:"100%",height:"500px",position:"relative","& .lottie-ani":{position:"absolute",width:"100%",height:"100%",left:0,top:0}},"& .MuiEditorView-root":{overflow:"hidden"},overflow:"hidden"}}),eB=x.forwardRef(function(e,t){var n,o,i,r,a,l,s=eN({props:e,name:"MuiEditor"}),u=s.sx,c=(0,g.Z)(s,ez),d=x.useRef(null);(0,y.Z)(t,d);var p=buildTracks({tracks:c.tracks,actions:c.actions,actionData:c.actionData}),f=x.useState(p),P=(0,m.Z)(f,2),S=P[0],R=P[1],M=useEditor({plugins:J,rootRef:t,props:c}),C=M.getRootProps,T=M.getEditorViewProps,j=M.getControlsProps,L=M.getTimelineProps,A=M.getBottomLeftProps,I=M.getBottomRightProps,F=c.slots,D=c.slotProps,V=Editor_useUtilityClasses(c),U=null!==(n=null==F?void 0:F.root)&&void 0!==n?n:eW,_=(0,w.y)({elementType:U,externalSlotProps:null==D?void 0:D.root,className:V.root,getSlotProps:C,ownerState:c}),z=null!==(o=null==F?void 0:F.editorView)&&void 0!==o?o:eR,N=(0,w.y)({elementType:z,externalSlotProps:null==D?void 0:D.editorView,className:V.editorView,getSlotProps:T,ownerState:c}),W=null!==(i=null==F?void 0:F.videoControls)&&void 0!==i?i:eZ,B=(0,w.y)({elementType:W,externalSlotProps:null==D?void 0:D.videoControls,className:V.videoControls,getSlotProps:j,ownerState:c}),K=null!==(r=null==F?void 0:F.timeline)&&void 0!==r?r:b.T,H=(0,w.y)({elementType:K,externalSlotProps:null==D?void 0:D.timeline,className:V.timeline,getSlotProps:L,ownerState:e}),$=null!==(a=null==F?void 0:F.bottomLeft)&&void 0!==a?a:Z.e,G=(0,w.y)({elementType:$,externalSlotProps:null==D?void 0:D.bottomLeft,className:V.bottomLeft,getSlotProps:A,ownerState:c}),O=null!==(l=null==F?void 0:F.bottomRight)&&void 0!==l?l:Z.e,X=(0,w.y)({elementType:O,externalSlotProps:null==D?void 0:D.bottomRight,className:V.bottomRight,getSlotProps:I,ownerState:c}),q=x.useRef(null),Q=x.useRef(new E.Z),Y=x.useState(160),ee=(0,m.Z)(Y,2),et=ee[0],en=ee[1],eo=x.useRef(null),setScaleWidthProxy=function(e){en(e)};console.log("generatedTracks",H.tracks),x.useEffect(function(){var e;null!=d&&d.current&&Q.current&&(null===(e=d.current)||void 0===e||e.addEventListener("keydown",function(e){if(e.target){var t=Q.current.getSelectedActions();null!=t&&t.length&&"Backspace"===e.key&&R(function(e){var n=t.map(function(e){return e.action.id});return e.forEach(function(e){e.actions=e.actions.filter(function(e){return -1===n.indexOf(e.id)})}),(0,h.Z)(e)})}}))},[d]);var ei=x.useState(!1),er=(0,m.Z)(ei,2),ea=er[0],el=er[1];return x.useEffect(function(){!ea&&eo.current&&Q.current&&(Q.current.viewer=eo.current,el(!0))},[eo.current]),(0,ed.jsxs)(U,(0,v.Z)((0,v.Z)({},_),{},{sx:u,children:[(0,ed.jsx)(z,(0,v.Z)((0,v.Z)({},N),{},{ref:eo,engine:Q})),(0,ed.jsx)(W,(0,v.Z)((0,v.Z)({},B),{},{timelineState:q,scaleWidth:et,setScaleWidth:setScaleWidthProxy})),ea&&(0,ed.jsx)(K,(0,v.Z)((0,v.Z)({},H),{},{tracks:S,setTracks:R,timelineState:q,scaleWidth:et,setScaleWidth:setScaleWidthProxy,viewSelector:".MuiEditorView-root",slots:{labels:e_},engine:Q})),(0,ed.jsxs)(k.Z,{direction:"row",spacing:2,children:[(0,ed.jsx)($,(0,v.Z)({},G)),(0,ed.jsx)(O,(0,v.Z)({},X))]})]}))})},71659:function(e,t,n){n.d(t,{I:function(){return getEditorUtilityClass},U:function(){return i}});var o=n(48809);function getEditorUtilityClass(e){return(0,o.ZP)("MuiEditor",e)}var i=(0,n(62234).Z)("MuiEditor",["root","editorView","videoControls","timeline","bottomLeft","bottomRight"])},12157:function(e,t,n){n.d(t,{b:function(){return d}});var o=n(81574),i=n(13256),r=n(57341),a=n(7528),l=n(61330),s=n(2651),u=n(4381),c=n(48837),d=[o.B,i.y,r.i,a.M,l.x,s.j,u.A,c.H]},90996:function(e,t,n){n.d(t,{e:function(){return z},B:function(){return _}});var o,i,r,a=n(36063),l=n(92379),s=n(62534),u=n(77539),c=n(3881),d=n(5260),p=n(45379),f=n(5652),v=n(79836),h=n(86514),m=n(12157),g=n(98902),x=n(53710),y=n(21797),Z=n.n(y),w=n(50274),P=n.n(w),k=n(90402),b=n(68225),E=n(69974),useFileExplorerGridHeaders=function(e){var t=(0,k.i)(),n=t.instance,o=t.publicAPI,i=e.id,r=e.rootRef,s=l.useRef(null),u=(0,E.Z)(r,s);return{getRootProps:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,a.Z)((0,a.Z)({},(0,b._)(e)),(0,b._)(t));return(0,a.Z)((0,a.Z)({},n),{},{ref:u,role:"file-explorer-view-grid-headers",id:i},t)},publicAPI:o,instance:n}},S=n(75994),R=n(651),M=(0,f.ZP)("li",{name:"MuiFile",slot:"Root",overridesResolver:function(e,t){return t.root}})(function(e){return e.theme,{}}),C=l.forwardRef(function(e,t){var n=(0,k.i)().instance,i=useFileExplorerGridHeaders({id:"header-row",rootRef:t}),r=n.getHeaders();if(!i||!n.gridEnabled()||Z()(r).length<=1)return o||(o=(0,R.jsx)(l.Fragment,{}));var s=i.getRootProps,u=P()(r).map(function(t,n){var o=(0,x.Z)(t,1)[0];return(0,R.jsx)(S.q,{id:e.id,columnName:o,className:"column-".concat(o," col-").concat(n)},"".concat(o,"-").concat(n))});return(0,R.jsx)(M,(0,a.Z)((0,a.Z)({style:{display:"flex",width:"100%",borderBottom:"1px solid #444"}},s()),{},{children:u}))}),T=n(65784),j=n(70819),L=["slots","slotProps","label","children","last","id","itemId","type","size","modified"];function FileWrapped(e){var t,n=e.slots,o=e.slotProps,i=e.label,r=e.children,l=e.last,s=e.id,c=e.itemId,d=e.type,p=e.size,f=e.modified,v=(0,T.Z)(e,L),h=null!==(t=null==n?void 0:n.item)&&void 0!==t?t:j.$,m=(0,u.y)({elementType:h,externalSlotProps:null==o?void 0:o.item,additionalProps:(0,a.Z)({label:i,id:s,itemId:c,last:l,type:d,size:p,modified:f},v),ownerState:{itemId:c,label:i}});return(0,R.jsx)(h,(0,a.Z)((0,a.Z)({},m),{},{children:r}))}var A=n(48414),I=n(48809);function getFileDropzoneUtilityClass(e){return(0,I.ZP)("MuiFileDropzone",e)}(0,n(62234).Z)("MuiFileDropzone",["root"]);var F=(0,p.Uu)("MuiFileDropzone"),useUtilityClasses=function(e){var t=e.classes;return(0,s.Z)({root:["root"]},getFileDropzoneUtilityClass,t)},D=(0,f.ZP)("div",{name:"MuiFileDropzone",slot:"Root",overridesResolver:function(e,t){return t.root}})({padding:0,margin:0,listStyle:"none",outline:0,position:"relative"});(0,g.b)(["SUI X: The `FileDropzone` component does not support the `items` prop.","If you want to add items, you need to pass them as JSX children.","Check the documentation for more details: https://stoked-ui.github.io/x/react-fileExplorer-view/simple-fileExplorer-view/items/"]);var V=l.forwardRef(function(e,t){var n,o=F({props:e,name:"MuiFileDropzone"}),i=o.slots,r=o.slotProps,l=useUtilityClasses(o),s=null!==(n=null==i?void 0:i.root)&&void 0!==n?n:D,c=(0,u.y)({elementType:s,externalSlotProps:null==r?void 0:r.root,className:l.root,ownerState:o});return(0,R.jsx)(s,(0,a.Z)({},c))}),U=(0,p.Uu)("MuiFileExplorer"),FileExplorer_useUtilityClasses=function(e){var t=e.classes;return(0,s.Z)({root:["root"]},d.U,t)},_=(0,f.ZP)("ul",{name:"MuiFileExplorer",slot:"Root",overridesResolver:function(e,t){return t.root},shouldForwardProp:function(e){return(0,c.shouldForwardProp)(e)&&"grow"!==e&&"cell"!==e&&"last"!==e&&"header"!==e&&"first"!==e}})(function(e){return{padding:0,margin:0,listStyle:"none",outline:0,position:"relative","& .header:after":{content:'""',position:"absolute",width:"1px",height:"80%",backgroundColor:e.theme.palette.divider,alignSelf:"center",right:0},"& .header:last-child:after":{display:"none"}}});(0,g.b)(["SUI X: The `FileExplorer` component does not support JSX children.","If you want to add items, you need to use the `items` prop","Check the documentation for more details: https://stoked-ui.github.io/x/react-fileExplorer-view/rich-fileExplorer-view/items/"]);var z=l.forwardRef(function(e,t){var n,o,s=U({props:e,name:"MuiFileExplorer"}),c=(0,a.Z)((0,a.Z)({},s),{},{id:s.id}),d=(0,v.f)({plugins:m.b,rootRef:t,props:c}),p=d.getRootProps,f=d.contextValue,g=d.instance,x=s.slots,y=s.slotProps,Z=FileExplorer_useUtilityClasses(s),w=null!==(o=null==x?void 0:x.root)&&void 0!==o?o:_,P=(0,u.y)({elementType:w,externalSlotProps:null==y?void 0:y.root,className:Z.root,getSlotProps:p,ownerState:s}),k=g.getItemsToRender(),renderItem=function renderItem(e){var t,n=g.getItem(e.itemId);return(0,l.createElement)(FileWrapped,(0,a.Z)((0,a.Z)((0,a.Z)({},n),e),{},{slots:x,key:e.itemId,sx:s.sx}),null===(t=e.children)||void 0===t?void 0:t.map(renderItem))};return(0,R.jsx)(h.u,{value:f,children:(0,R.jsx)(A.Ml.Provider,{value:g.getDndContext,children:null!==(n=s.items)&&void 0!==n&&n.length?s.grid?(0,R.jsxs)(w,(0,a.Z)((0,a.Z)({},P),{},{sx:s.sx,children:[r||(r=(0,R.jsx)(C,{id:"file-explorer-headers"})),(0,R.jsx)("div",{children:k.map(renderItem)})]})):(0,R.jsx)(w,(0,a.Z)((0,a.Z)({},P),{},{sx:s.sx,children:k.map(renderItem)})):i||(i=(0,R.jsx)(V,{}))})})})},5260:function(e,t,n){n.d(t,{C:function(){return i},U:function(){return getFileExplorerUtilityClass}});var o=n(48809);function getFileExplorerUtilityClass(e){return(0,o.ZP)("MuiFileExplorer",e)}var i=(0,n(62234).Z)("MuiFileExplorer",["root"])}}]);